======================================================================
KAFKA - RELAT√ìRIO DE LAT√äNCIA END-TO-END
======================================================================

üìñ EXPLICA√á√ÉO DA MEDI√á√ÉO:
----------------------------------------------------------------------
Este teste mede a LAT√äNCIA END-TO-END, que inclui:

  T0 ‚Üí Cria√ß√£o da mensagem no PRODUCER
       - Marca o timestamp antes da serializa√ß√£o JSON
       - Armazenado no campo 'timestamp_ms' da mensagem

  T1 ‚Üí Serializa√ß√£o JSON no producer
       - Convers√£o do dict Python para JSON bytes
       - Feita automaticamente pelo value_serializer

  T2 ‚Üí Envio pela rede + Processamento no Kafka
       - Transmiss√£o TCP/IP (localhost)
       - Persist√™ncia em disco (acks='all')
       - Replica√ß√£o entre brokers (se houver r√©plicas)
       - Armazenamento em parti√ß√£o/offset

  T3 ‚Üí Recebimento RAW no CONSUMER
       - Timestamp capturado ANTES da desserializa√ß√£o
       - Este √© o ponto final da medi√ß√£o
       - IMPORTANTE: value_deserializer=None para controlar isso!

  T4 ‚Üí Desserializa√ß√£o JSON no consumer
       - N√ÉO inclu√≠do na lat√™ncia end-to-end
       - Desserializa√ß√£o manual com json.loads()
       - Medido separadamente para an√°lise

LAT√äNCIA END-TO-END = T3 - T0
(Tempo total desde cria√ß√£o at√© recebimento, sem processamento)
======================================================================

üìä RESUMO ESTAT√çSTICO
----------------------------------------------------------------------
Total de mensagens: 100
Lat√™ncia m√©dia: 18.17 ms
Lat√™ncia m√≠nima: 1.86 ms
Lat√™ncia m√°xima: 169.21 ms
Mediana: 4.00 ms
Desvio padr√£o: 24.79 ms

Percentis:
  P50: 4.06 ms
  P90: 52.65 ms
  P95: 58.92 ms
  P99: 169.21 ms

======================================================================

üìã DADOS DETALHADOS (FORMATO DATAFRAME)
----------------------------------------------------------------------
  ID |     T0_Creation |      T3_Receive |     T4_Deserial |    Latency |   Deserial |      Total | Part | Offset
----------------------------------------------------------------------
   0 | 1760998937189.030 | 1760998937358.242 | 1760998937358.277 |    169.212 |      0.035 |    169.248 |    0 |    300
   1 | 1760998937294.850 | 1760998937358.344 | 1760998937358.357 |     63.494 |      0.012 |     63.507 |    0 |    301
   2 | 1760998937296.658 | 1760998937358.407 | 1760998937358.415 |     61.749 |      0.008 |     61.757 |    0 |    302
   3 | 1760998937298.148 | 1760998937358.443 | 1760998937358.450 |     60.295 |      0.007 |     60.302 |    0 |    303
   4 | 1760998937299.554 | 1760998937358.478 | 1760998937358.485 |     58.923 |      0.007 |     58.931 |    0 |    304
   5 | 1760998937300.888 | 1760998937358.512 | 1760998937358.519 |     57.624 |      0.006 |     57.631 |    0 |    305
   6 | 1760998937302.206 | 1760998937358.544 | 1760998937358.548 |     56.338 |      0.004 |     56.342 |    0 |    306
   7 | 1760998937303.495 | 1760998937358.557 | 1760998937358.559 |     55.062 |      0.002 |     55.064 |    0 |    307
   8 | 1760998937304.699 | 1760998937358.583 | 1760998937358.594 |     53.884 |      0.010 |     53.895 |    0 |    308
   9 | 1760998937305.968 | 1760998937358.619 | 1760998937358.623 |     52.651 |      0.004 |     52.656 |    0 |    309
  10 | 1760998937307.413 | 1760998937358.649 | 1760998937358.655 |     51.235 |      0.006 |     51.241 |    0 |    310
  11 | 1760998937308.681 | 1760998937358.669 | 1760998937358.672 |     49.988 |      0.004 |     49.991 |    0 |    311
  12 | 1760998937309.721 | 1760998937358.696 | 1760998937358.698 |     48.974 |      0.003 |     48.977 |    0 |    312
  13 | 1760998937310.659 | 1760998937358.740 | 1760998937358.746 |     48.081 |      0.005 |     48.087 |    0 |    313
  14 | 1760998937311.851 | 1760998937358.760 | 1760998937358.765 |     46.909 |      0.004 |     46.914 |    0 |    314
  15 | 1760998937313.182 | 1760998937358.791 | 1760998937358.797 |     45.609 |      0.006 |     45.615 |    0 |    315
  16 | 1760998937314.292 | 1760998937358.826 | 1760998937358.832 |     44.534 |      0.006 |     44.541 |    0 |    316
  17 | 1760998937315.816 | 1760998937358.863 | 1760998937358.869 |     43.047 |      0.006 |     43.053 |    0 |    317
  18 | 1760998937317.172 | 1760998937358.905 | 1760998937358.911 |     41.733 |      0.006 |     41.739 |    0 |    318
  19 | 1760998937318.446 | 1760998937358.940 | 1760998937358.946 |     40.494 |      0.006 |     40.500 |    0 |    319
  20 | 1760998937319.519 | 1760998937358.974 | 1760998937358.980 |     39.455 |      0.006 |     39.461 |    0 |    320
  21 | 1760998937321.534 | 1760998937358.993 | 1760998937358.997 |     37.458 |      0.004 |     37.462 |    0 |    321
  22 | 1760998937323.791 | 1760998937359.022 | 1760998937359.029 |     35.231 |      0.006 |     35.237 |    0 |    322
  23 | 1760998937325.438 | 1760998937359.058 | 1760998937359.064 |     33.620 |      0.006 |     33.626 |    0 |    323
  24 | 1760998937326.761 | 1760998937359.121 | 1760998937359.127 |     32.360 |      0.006 |     32.366 |    0 |    324
  25 | 1760998937328.029 | 1760998937359.158 | 1760998937359.164 |     31.128 |      0.006 |     31.135 |    0 |    325
  26 | 1760998937329.205 | 1760998937359.193 | 1760998937359.201 |     29.989 |      0.005 |     29.996 |    0 |    326
  27 | 1760998937330.552 | 1760998937359.238 | 1760998937359.244 |     28.686 |      0.006 |     28.692 |    0 |    327
  28 | 1760998937331.900 | 1760998937359.273 | 1760998937359.279 |     27.373 |      0.005 |     27.378 |    0 |    328
  29 | 1760998937333.610 | 1760998937359.290 | 1760998937359.293 |     25.680 |      0.003 |     25.683 |    0 |    329
  30 | 1760998937335.439 | 1760998937359.328 | 1760998937359.334 |     23.889 |      0.006 |     23.895 |    0 |    330
  31 | 1760998937337.439 | 1760998937359.362 | 1760998937359.368 |     21.923 |      0.006 |     21.928 |    0 |    331
  32 | 1760998937339.402 | 1760998937359.403 | 1760998937359.409 |     20.002 |      0.006 |     20.008 |    0 |    332
  33 | 1760998937341.292 | 1760998937359.431 | 1760998937359.436 |     18.139 |      0.005 |     18.144 |    0 |    333
  34 | 1760998937343.267 | 1760998937359.465 | 1760998937359.471 |     16.197 |      0.006 |     16.203 |    0 |    334
  35 | 1760998937345.240 | 1760998937359.502 | 1760998937359.509 |     14.262 |      0.005 |     14.268 |    0 |    335
  36 | 1760998937347.225 | 1760998937359.558 | 1760998937359.564 |     12.333 |      0.006 |     12.339 |    0 |    336
  37 | 1760998937350.092 | 1760998937359.593 | 1760998937359.599 |      9.502 |      0.005 |      9.507 |    0 |    337
  38 | 1760998937352.403 | 1760998937359.626 | 1760998937359.633 |      7.223 |      0.007 |      7.230 |    0 |    338
  39 | 1760998937354.991 | 1760998937362.084 | 1760998937362.099 |      7.092 |      0.015 |      7.108 |    0 |    339
  40 | 1760998937356.875 | 1760998937362.153 | 1760998937362.158 |      5.278 |      0.005 |      5.284 |    0 |    340
  41 | 1760998937358.667 | 1760998937362.193 | 1760998937362.199 |      3.526 |      0.006 |      3.533 |    0 |    341
  42 | 1760998937361.248 | 1760998937363.883 | 1760998937363.902 |      2.635 |      0.018 |      2.654 |    0 |    342
  43 | 1760998937363.271 | 1760998937365.500 | 1760998937365.514 |      2.228 |      0.014 |      2.243 |    0 |    343
  44 | 1760998937365.264 | 1760998937369.184 | 1760998937369.208 |      3.919 |      0.023 |      3.943 |    0 |    344
  45 | 1760998937367.604 | 1760998937370.813 | 1760998937370.832 |      3.209 |      0.019 |      3.228 |    0 |    345
  46 | 1760998937370.304 | 1760998937372.334 | 1760998937372.355 |      2.030 |      0.020 |      2.051 |    0 |    346
  47 | 1760998937371.977 | 1760998937374.059 | 1760998937374.080 |      2.083 |      0.020 |      2.104 |    0 |    347
  48 | 1760998937373.799 | 1760998937376.293 | 1760998937376.316 |      2.494 |      0.022 |      2.517 |    0 |    348
  49 | 1760998937375.726 | 1760998937378.033 | 1760998937378.054 |      2.308 |      0.021 |      2.329 |    0 |    349
  50 | 1760998937377.912 | 1760998937380.920 | 1760998937380.939 |      3.009 |      0.018 |      3.027 |    0 |    350
  51 | 1760998937380.667 | 1760998937385.928 | 1760998937385.956 |      5.260 |      0.028 |      5.289 |    0 |    351
  52 | 1760998937383.049 | 1760998937388.506 | 1760998937388.531 |      5.457 |      0.024 |      5.482 |    0 |    352
  53 | 1760998937387.088 | 1760998937390.912 | 1760998937390.946 |      3.824 |      0.033 |      3.858 |    0 |    353
  54 | 1760998937389.318 | 1760998937392.805 | 1760998937392.820 |      3.487 |      0.014 |      3.502 |    0 |    354
  55 | 1760998937391.839 | 1760998937394.300 | 1760998937394.321 |      2.460 |      0.021 |      2.482 |    0 |    355
  56 | 1760998937393.630 | 1760998937395.730 | 1760998937395.743 |      2.100 |      0.012 |      2.113 |    0 |    356
  57 | 1760998937395.364 | 1760998937397.512 | 1760998937397.534 |      2.148 |      0.022 |      2.170 |    0 |    357
  58 | 1760998937397.273 | 1760998937400.906 | 1760998937400.980 |      3.634 |      0.072 |      3.707 |    0 |    358
  59 | 1760998937399.756 | 1760998937402.936 | 1760998937402.953 |      3.181 |      0.016 |      3.197 |    0 |    359
  60 | 1760998937401.931 | 1760998937405.350 | 1760998937405.375 |      3.419 |      0.024 |      3.444 |    0 |    360
  61 | 1760998937403.703 | 1760998937408.281 | 1760998937408.301 |      4.579 |      0.019 |      4.599 |    0 |    361
  62 | 1760998937406.621 | 1760998937410.000 | 1760998937410.015 |      3.379 |      0.014 |      3.393 |    0 |    362
  63 | 1760998937409.077 | 1760998937411.362 | 1760998937411.375 |      2.284 |      0.014 |      2.298 |    0 |    363
  64 | 1760998937410.691 | 1760998937413.726 | 1760998937413.755 |      3.035 |      0.028 |      3.063 |    0 |    364
  65 | 1760998937412.050 | 1760998937415.835 | 1760998937415.864 |      3.785 |      0.028 |      3.814 |    0 |    365
  66 | 1760998937414.619 | 1760998937417.489 | 1760998937417.506 |      2.870 |      0.016 |      2.887 |    0 |    366
  67 | 1760998937416.675 | 1760998937419.584 | 1760998937419.601 |      2.909 |      0.017 |      2.926 |    0 |    367
  68 | 1760998937418.237 | 1760998937421.306 | 1760998937421.322 |      3.069 |      0.015 |      3.085 |    0 |    368
  69 | 1760998937420.281 | 1760998937423.387 | 1760998937423.411 |      3.106 |      0.022 |      3.130 |    0 |    369
  70 | 1760998937422.108 | 1760998937425.049 | 1760998937425.064 |      2.940 |      0.015 |      2.956 |    0 |    370
  71 | 1760998937423.926 | 1760998937427.458 | 1760998937427.485 |      3.531 |      0.026 |      3.558 |    0 |    371
  72 | 1760998937425.857 | 1760998937429.922 | 1760998937429.944 |      4.064 |      0.021 |      4.087 |    0 |    372
  73 | 1760998937429.766 | 1760998937433.066 | 1760998937433.082 |      3.300 |      0.015 |      3.316 |    0 |    373
  74 | 1760998937432.884 | 1760998937435.494 | 1760998937435.513 |      2.610 |      0.019 |      2.629 |    0 |    374
  75 | 1760998937434.769 | 1760998937436.963 | 1760998937436.977 |      2.195 |      0.013 |      2.208 |    0 |    375
  76 | 1760998937436.449 | 1760998937438.306 | 1760998937438.324 |      1.857 |      0.018 |      1.875 |    0 |    376
  77 | 1760998937438.267 | 1760998937441.595 | 1760998937441.618 |      3.327 |      0.023 |      3.351 |    0 |    377
  78 | 1760998937441.450 | 1760998937444.740 | 1760998937444.762 |      3.290 |      0.021 |      3.312 |    0 |    378
  79 | 1760998937444.648 | 1760998937447.815 | 1760998937447.839 |      3.167 |      0.023 |      3.191 |    0 |    379
  80 | 1760998937447.504 | 1760998937451.231 | 1760998937451.255 |      3.727 |      0.023 |      3.751 |    0 |    380
  81 | 1760998937450.866 | 1760998937454.749 | 1760998937454.766 |      3.883 |      0.016 |      3.900 |    0 |    381
  82 | 1760998937454.044 | 1760998937456.486 | 1760998937456.509 |      2.442 |      0.022 |      2.465 |    0 |    382
  83 | 1760998937455.969 | 1760998937457.882 | 1760998937457.895 |      1.913 |      0.013 |      1.926 |    0 |    383
  84 | 1760998937457.755 | 1760998937462.207 | 1760998937462.233 |      4.452 |      0.025 |      4.478 |    0 |    384
  85 | 1760998937461.064 | 1760998937464.438 | 1760998937464.464 |      3.375 |      0.024 |      3.400 |    0 |    385
  86 | 1760998937463.521 | 1760998937466.549 | 1760998937466.576 |      3.029 |      0.025 |      3.055 |    0 |    386
  87 | 1760998937465.780 | 1760998937468.636 | 1760998937468.659 |      2.856 |      0.021 |      2.879 |    0 |    387
  88 | 1760998937467.682 | 1760998937470.381 | 1760998937470.401 |      2.699 |      0.020 |      2.720 |    0 |    388
  89 | 1760998937469.956 | 1760998937474.016 | 1760998937474.056 |      4.060 |      0.038 |      4.100 |    0 |    389
  90 | 1760998937472.731 | 1760998937477.892 | 1760998937477.918 |      5.161 |      0.025 |      5.188 |    0 |    390
  91 | 1760998937476.920 | 1760998937481.837 | 1760998937481.855 |      4.917 |      0.018 |      4.935 |    0 |    391
  92 | 1760998937481.336 | 1760998937483.757 | 1760998937483.778 |      2.421 |      0.021 |      2.443 |    0 |    392
  93 | 1760998937483.743 | 1760998937486.176 | 1760998937486.199 |      2.433 |      0.023 |      2.457 |    0 |    393
  94 | 1760998937485.607 | 1760998937492.074 | 1760998937492.099 |      6.468 |      0.025 |      6.493 |    0 |    394
  95 | 1760998937490.608 | 1760998937493.720 | 1760998937493.738 |      3.112 |      0.017 |      3.129 |    0 |    395
  96 | 1760998937492.650 | 1760998937495.000 | 1760998937495.019 |      2.350 |      0.018 |      2.368 |    0 |    396
  97 | 1760998937494.216 | 1760998937496.816 | 1760998937496.837 |      2.600 |      0.020 |      2.621 |    0 |    397
  98 | 1760998937495.942 | 1760998937499.185 | 1760998937499.212 |      3.243 |      0.026 |      3.270 |    0 |    398
  99 | 1760998937497.806 | 1760998937501.737 | 1760998937501.762 |      3.931 |      0.024 |      3.956 |    0 |    399

======================================================================
LEGENDA:
  ID         = Identificador da mensagem
  T0_Creation = Timestamp de cria√ß√£o no producer (ms)
  T3_Receive  = Timestamp de recebimento RAW no consumer (ms)
  T4_Deserial = Timestamp ap√≥s desserializa√ß√£o (ms)
  Latency     = Lat√™ncia end-to-end SEM desserializa√ß√£o (ms)
  Deserial    = Tempo de desserializa√ß√£o JSON (ms)
  Total       = Tempo total COM desserializa√ß√£o (ms)
  Part        = Parti√ß√£o do Kafka onde a mensagem foi armazenada
  Offset      = Offset da mensagem na parti√ß√£o
======================================================================
