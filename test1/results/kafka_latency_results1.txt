======================================================================
KAFKA - RELAT√ìRIO DE LAT√äNCIA END-TO-END
======================================================================

üìñ EXPLICA√á√ÉO DA MEDI√á√ÉO:
----------------------------------------------------------------------
Este teste mede a LAT√äNCIA END-TO-END, que inclui:

  T0 ‚Üí Cria√ß√£o da mensagem no PRODUCER
       - Marca o timestamp antes da serializa√ß√£o JSON
       - Armazenado no campo 'timestamp_ms' da mensagem

  T1 ‚Üí Serializa√ß√£o JSON no producer
       - Convers√£o do dict Python para JSON bytes
       - Feita automaticamente pelo value_serializer

  T2 ‚Üí Envio pela rede + Processamento no Kafka
       - Transmiss√£o TCP/IP (localhost)
       - Persist√™ncia em disco (acks='all')
       - Replica√ß√£o entre brokers (se houver r√©plicas)
       - Armazenamento em parti√ß√£o/offset

  T3 ‚Üí Recebimento RAW no CONSUMER
       - Timestamp capturado ANTES da desserializa√ß√£o
       - Este √© o ponto final da medi√ß√£o
       - IMPORTANTE: value_deserializer=None para controlar isso!

  T4 ‚Üí Desserializa√ß√£o JSON no consumer
       - N√ÉO inclu√≠do na lat√™ncia end-to-end
       - Desserializa√ß√£o manual com json.loads()
       - Medido separadamente para an√°lise

LAT√äNCIA END-TO-END = T3 - T0
(Tempo total desde cria√ß√£o at√© recebimento, sem processamento)
======================================================================

üìä RESUMO ESTAT√çSTICO
----------------------------------------------------------------------
Total de mensagens: 100
Lat√™ncia m√©dia: 6.17 ms
Lat√™ncia m√≠nima: 2.39 ms
Lat√™ncia m√°xima: 123.19 ms
Mediana: 4.63 ms
Desvio padr√£o: 11.98 ms

Percentis:
  P50: 4.64 ms
  P90: 7.45 ms
  P95: 8.30 ms
  P99: 123.19 ms

======================================================================

üìã DADOS DETALHADOS (FORMATO DATAFRAME)
----------------------------------------------------------------------
  ID |     T0_Creation |      T3_Receive |     T4_Deserial |    Latency |   Deserial |      Total | Part | Offset
----------------------------------------------------------------------
   0 | 1760998895310.151 | 1760998895433.344 | 1760998895433.375 |    123.193 |      0.030 |    123.223 |    0 |      0
   1 | 1760998895428.328 | 1760998895436.242 | 1760998895436.261 |      7.914 |      0.018 |      7.932 |    0 |      1
   2 | 1760998895432.465 | 1760998895436.329 | 1760998895436.339 |      3.864 |      0.010 |      3.874 |    0 |      2
   3 | 1760998895435.564 | 1760998895438.574 | 1760998895438.596 |      3.010 |      0.021 |      3.032 |    0 |      3
   4 | 1760998895438.480 | 1760998895442.663 | 1760998895442.684 |      4.183 |      0.021 |      4.204 |    0 |      4
   5 | 1760998895442.091 | 1760998895446.395 | 1760998895446.422 |      4.304 |      0.027 |      4.331 |    0 |      5
   6 | 1760998895444.791 | 1760998895453.638 | 1760998895453.665 |      8.847 |      0.026 |      8.874 |    0 |      6
   7 | 1760998895448.373 | 1760998895453.742 | 1760998895453.750 |      5.369 |      0.008 |      5.377 |    0 |      7
   8 | 1760998895452.534 | 1760998895456.068 | 1760998895456.092 |      3.534 |      0.022 |      3.558 |    0 |      8
   9 | 1760998895455.390 | 1760998895458.389 | 1760998895458.416 |      2.999 |      0.026 |      3.026 |    0 |      9
  10 | 1760998895458.926 | 1760998895462.927 | 1760998895462.944 |      4.001 |      0.017 |      4.019 |    0 |     10
  11 | 1760998895461.754 | 1760998895475.018 | 1760998895475.048 |     13.264 |      0.028 |     13.294 |    0 |     11
  12 | 1760998895464.448 | 1760998895479.138 | 1760998895479.156 |     14.690 |      0.017 |     14.708 |    0 |     12
  13 | 1760998895477.828 | 1760998895481.468 | 1760998895481.495 |      3.640 |      0.026 |      3.667 |    0 |     13
  14 | 1760998895479.988 | 1760998895484.680 | 1760998895484.704 |      4.693 |      0.023 |      4.717 |    0 |     14
  15 | 1760998895484.447 | 1760998895489.405 | 1760998895489.438 |      4.958 |      0.033 |      4.991 |    0 |     15
  16 | 1760998895487.177 | 1760998895492.610 | 1760998895492.640 |      5.433 |      0.029 |      5.462 |    0 |     16
  17 | 1760998895489.396 | 1760998895497.020 | 1760998895497.047 |      7.625 |      0.026 |      7.651 |    0 |     17
  18 | 1760998895493.904 | 1760998895500.254 | 1760998895500.402 |      6.349 |      0.145 |      6.498 |    0 |     18
  19 | 1760998895498.055 | 1760998895503.118 | 1760998895503.142 |      5.062 |      0.024 |      5.087 |    0 |     19
  20 | 1760998895501.881 | 1760998895506.438 | 1760998895506.468 |      4.558 |      0.029 |      4.587 |    0 |     20
  21 | 1760998895503.987 | 1760998895509.799 | 1760998895509.834 |      5.812 |      0.035 |      5.848 |    0 |     21
  22 | 1760998895506.730 | 1760998895512.721 | 1760998895512.771 |      5.991 |      0.050 |      6.041 |    0 |     22
  23 | 1760998895510.903 | 1760998895517.758 | 1760998895517.785 |      6.855 |      0.026 |      6.883 |    0 |     23
  24 | 1760998895516.959 | 1760998895521.371 | 1760998895521.395 |      4.412 |      0.022 |      4.436 |    0 |     24
  25 | 1760998895520.294 | 1760998895523.701 | 1760998895523.734 |      3.407 |      0.031 |      3.440 |    0 |     25
  26 | 1760998895522.359 | 1760998895528.191 | 1760998895528.219 |      5.832 |      0.027 |      5.859 |    0 |     26
  27 | 1760998895525.323 | 1760998895530.787 | 1760998895530.810 |      5.463 |      0.023 |      5.487 |    0 |     27
  28 | 1760998895528.346 | 1760998895533.821 | 1760998895533.844 |      5.474 |      0.022 |      5.497 |    0 |     28
  29 | 1760998895530.734 | 1760998895536.390 | 1760998895536.408 |      5.656 |      0.017 |      5.674 |    0 |     29
  30 | 1760998895535.009 | 1760998895538.154 | 1760998895538.176 |      3.145 |      0.021 |      3.167 |    0 |     30
  31 | 1760998895537.496 | 1760998895540.176 | 1760998895540.196 |      2.680 |      0.020 |      2.700 |    0 |     31
  32 | 1760998895540.102 | 1760998895543.781 | 1760998895543.804 |      3.680 |      0.021 |      3.702 |    0 |     32
  33 | 1760998895543.071 | 1760998895547.106 | 1760998895547.169 |      4.035 |      0.062 |      4.098 |    0 |     33
  34 | 1760998895545.486 | 1760998895550.776 | 1760998895550.801 |      5.291 |      0.024 |      5.315 |    0 |     34
  35 | 1760998895548.869 | 1760998895552.921 | 1760998895552.937 |      4.052 |      0.016 |      4.068 |    0 |     35
  36 | 1760998895552.291 | 1760998895554.685 | 1760998895554.706 |      2.395 |      0.020 |      2.415 |    0 |     36
  37 | 1760998895554.425 | 1760998895561.668 | 1760998895561.692 |      7.243 |      0.024 |      7.267 |    0 |     37
  38 | 1760998895558.193 | 1760998895564.008 | 1760998895564.031 |      5.815 |      0.022 |      5.838 |    0 |     38
  39 | 1760998895563.299 | 1760998895567.048 | 1760998895567.072 |      3.749 |      0.023 |      3.773 |    0 |     39
  40 | 1760998895566.980 | 1760998895570.710 | 1760998895570.734 |      3.729 |      0.023 |      3.753 |    0 |     40
  41 | 1760998895569.690 | 1760998895572.914 | 1760998895572.930 |      3.223 |      0.016 |      3.240 |    0 |     41
  42 | 1760998895571.887 | 1760998895575.103 | 1760998895575.168 |      3.216 |      0.065 |      3.282 |    0 |     42
  43 | 1760998895573.918 | 1760998895577.490 | 1760998895577.508 |      3.572 |      0.017 |      3.589 |    0 |     43
  44 | 1760998895576.468 | 1760998895580.380 | 1760998895580.408 |      3.912 |      0.028 |      3.941 |    0 |     44
  45 | 1760998895578.683 | 1760998895583.489 | 1760998895583.515 |      4.806 |      0.025 |      4.832 |    0 |     45
  46 | 1760998895581.260 | 1760998895585.510 | 1760998895585.533 |      4.251 |      0.022 |      4.274 |    0 |     46
  47 | 1760998895583.869 | 1760998895587.440 | 1760998895587.466 |      3.571 |      0.025 |      3.597 |    0 |     47
  48 | 1760998895585.993 | 1760998895589.577 | 1760998895589.592 |      3.583 |      0.015 |      3.599 |    0 |     48
  49 | 1760998895588.080 | 1760998895592.717 | 1760998895592.744 |      4.637 |      0.027 |      4.665 |    0 |     49
  50 | 1760998895590.631 | 1760998895595.947 | 1760998895595.976 |      5.316 |      0.029 |      5.345 |    0 |     50
  51 | 1760998895593.611 | 1760998895601.487 | 1760998895601.507 |      7.875 |      0.020 |      7.895 |    0 |     51
  52 | 1760998895599.069 | 1760998895603.757 | 1760998895603.781 |      4.688 |      0.023 |      4.712 |    0 |     52
  53 | 1760998895601.587 | 1760998895606.176 | 1760998895606.199 |      4.589 |      0.022 |      4.611 |    0 |     53
  54 | 1760998895603.634 | 1760998895610.688 | 1760998895610.711 |      7.055 |      0.022 |      7.078 |    0 |     54
  55 | 1760998895606.149 | 1760998895610.785 | 1760998895610.792 |      4.636 |      0.006 |      4.643 |    0 |     55
  56 | 1760998895608.449 | 1760998895612.682 | 1760998895612.700 |      4.232 |      0.018 |      4.251 |    0 |     56
  57 | 1760998895612.471 | 1760998895619.676 | 1760998895619.693 |      7.204 |      0.017 |      7.222 |    0 |     57
  58 | 1760998895617.620 | 1760998895621.839 | 1760998895621.858 |      4.219 |      0.018 |      4.237 |    0 |     58
  59 | 1760998895620.580 | 1760998895624.370 | 1760998895624.402 |      3.790 |      0.031 |      3.822 |    0 |     59
  60 | 1760998895622.979 | 1760998895627.379 | 1760998895627.410 |      4.400 |      0.030 |      4.430 |    0 |     60
  61 | 1760998895626.307 | 1760998895630.049 | 1760998895630.130 |      3.742 |      0.080 |      3.824 |    0 |     61
  62 | 1760998895629.200 | 1760998895634.482 | 1760998895634.499 |      5.282 |      0.016 |      5.299 |    0 |     62
  63 | 1760998895633.250 | 1760998895636.752 | 1760998895636.769 |      3.502 |      0.016 |      3.519 |    0 |     63
  64 | 1760998895635.521 | 1760998895638.894 | 1760998895638.917 |      3.373 |      0.023 |      3.396 |    0 |     64
  65 | 1760998895638.050 | 1760998895641.390 | 1760998895641.409 |      3.341 |      0.018 |      3.359 |    0 |     65
  66 | 1760998895640.228 | 1760998895644.883 | 1760998895644.911 |      4.656 |      0.027 |      4.684 |    0 |     66
  67 | 1760998895644.147 | 1760998895647.129 | 1760998895647.151 |      2.982 |      0.021 |      3.003 |    0 |     67
  68 | 1760998895646.925 | 1760998895653.561 | 1760998895653.578 |      6.635 |      0.017 |      6.653 |    0 |     68
  69 | 1760998895652.130 | 1760998895655.575 | 1760998895655.597 |      3.445 |      0.021 |      3.467 |    0 |     69
  70 | 1760998895654.156 | 1760998895658.071 | 1760998895658.108 |      3.914 |      0.036 |      3.951 |    0 |     70
  71 | 1760998895656.547 | 1760998895660.683 | 1760998895660.700 |      4.135 |      0.017 |      4.153 |    0 |     71
  72 | 1760998895660.324 | 1760998895665.149 | 1760998895665.177 |      4.825 |      0.027 |      4.853 |    0 |     72
  73 | 1760998895663.459 | 1760998895667.828 | 1760998895667.853 |      4.369 |      0.023 |      4.393 |    0 |     73
  74 | 1760998895667.577 | 1760998895671.182 | 1760998895671.208 |      3.605 |      0.025 |      3.630 |    0 |     74
  75 | 1760998895670.446 | 1760998895673.418 | 1760998895673.435 |      2.972 |      0.016 |      2.989 |    0 |     75
  76 | 1760998895673.127 | 1760998895679.119 | 1760998895679.144 |      5.991 |      0.024 |      6.016 |    0 |     76
  77 | 1760998895676.173 | 1760998895683.625 | 1760998895683.652 |      7.452 |      0.026 |      7.479 |    0 |     77
  78 | 1760998895679.997 | 1760998895686.216 | 1760998895686.235 |      6.220 |      0.017 |      6.238 |    0 |     78
  79 | 1760998895684.973 | 1760998895688.708 | 1760998895688.730 |      3.734 |      0.021 |      3.756 |    0 |     79
  80 | 1760998895688.007 | 1760998895690.568 | 1760998895690.586 |      2.562 |      0.017 |      2.579 |    0 |     80
  81 | 1760998895690.563 | 1760998895696.028 | 1760998895696.063 |      5.465 |      0.034 |      5.500 |    0 |     81
  82 | 1760998895693.996 | 1760998895698.827 | 1760998895698.858 |      4.831 |      0.031 |      4.862 |    0 |     82
  83 | 1760998895697.999 | 1760998895701.151 | 1760998895701.167 |      3.152 |      0.016 |      3.168 |    0 |     83
  84 | 1760998895700.830 | 1760998895706.138 | 1760998895706.170 |      5.309 |      0.031 |      5.340 |    0 |     84
  85 | 1760998895702.993 | 1760998895710.486 | 1760998895710.512 |      7.493 |      0.025 |      7.519 |    0 |     85
  86 | 1760998895707.185 | 1760998895713.729 | 1760998895713.746 |      6.543 |      0.016 |      6.561 |    0 |     86
  87 | 1760998895710.479 | 1760998895718.776 | 1760998895718.806 |      8.297 |      0.029 |      8.328 |    0 |     87
  88 | 1760998895713.446 | 1760998895718.890 | 1760998895718.898 |      5.444 |      0.008 |      5.452 |    0 |     88
  89 | 1760998895718.253 | 1760998895721.893 | 1760998895721.917 |      3.640 |      0.023 |      3.664 |    0 |     89
  90 | 1760998895721.347 | 1760998895726.233 | 1760998895726.252 |      4.886 |      0.019 |      4.905 |    0 |     90
  91 | 1760998895724.728 | 1760998895729.135 | 1760998895729.154 |      4.408 |      0.017 |      4.426 |    0 |     91
  92 | 1760998895727.679 | 1760998895730.990 | 1760998895731.022 |      3.311 |      0.031 |      3.343 |    0 |     92
  93 | 1760998895731.839 | 1760998895736.455 | 1760998895736.480 |      4.616 |      0.025 |      4.641 |    0 |     93
  94 | 1760998895735.652 | 1760998895738.952 | 1760998895738.976 |      3.300 |      0.023 |      3.324 |    0 |     94
  95 | 1760998895738.781 | 1760998895744.831 | 1760998895744.887 |      6.050 |      0.055 |      6.106 |    0 |     95
  96 | 1760998895740.857 | 1760998895747.278 | 1760998895747.299 |      6.420 |      0.020 |      6.441 |    0 |     96
  97 | 1760998895744.854 | 1760998895749.961 | 1760998895749.989 |      5.107 |      0.027 |      5.135 |    0 |     97
  98 | 1760998895747.137 | 1760998895754.033 | 1760998895754.054 |      6.896 |      0.020 |      6.917 |    0 |     98
  99 | 1760998895750.999 | 1760998895757.501 | 1760998895757.530 |      6.502 |      0.028 |      6.531 |    0 |     99

======================================================================
LEGENDA:
  ID         = Identificador da mensagem
  T0_Creation = Timestamp de cria√ß√£o no producer (ms)
  T3_Receive  = Timestamp de recebimento RAW no consumer (ms)
  T4_Deserial = Timestamp ap√≥s desserializa√ß√£o (ms)
  Latency     = Lat√™ncia end-to-end SEM desserializa√ß√£o (ms)
  Deserial    = Tempo de desserializa√ß√£o JSON (ms)
  Total       = Tempo total COM desserializa√ß√£o (ms)
  Part        = Parti√ß√£o do Kafka onde a mensagem foi armazenada
  Offset      = Offset da mensagem na parti√ß√£o
======================================================================
