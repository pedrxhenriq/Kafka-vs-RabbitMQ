======================================================================
KAFKA - RELAT√ìRIO DE LAT√äNCIA END-TO-END
======================================================================

üìñ EXPLICA√á√ÉO DA MEDI√á√ÉO:
----------------------------------------------------------------------
Este teste mede a LAT√äNCIA END-TO-END, que inclui:

  T0 ‚Üí Cria√ß√£o da mensagem no PRODUCER
       - Marca o timestamp antes da serializa√ß√£o JSON
       - Armazenado no campo 'timestamp_ms' da mensagem

  T1 ‚Üí Serializa√ß√£o JSON no producer
       - Convers√£o do dict Python para JSON bytes
       - Feita automaticamente pelo value_serializer

  T2 ‚Üí Envio pela rede + Processamento no Kafka
       - Transmiss√£o TCP/IP (localhost)
       - Persist√™ncia em disco (acks='all')
       - Replica√ß√£o entre brokers (se houver r√©plicas)
       - Armazenamento em parti√ß√£o/offset

  T3 ‚Üí Recebimento RAW no CONSUMER
       - Timestamp capturado ANTES da desserializa√ß√£o
       - Este √© o ponto final da medi√ß√£o
       - IMPORTANTE: value_deserializer=None para controlar isso!

  T4 ‚Üí Desserializa√ß√£o JSON no consumer
       - N√ÉO inclu√≠do na lat√™ncia end-to-end
       - Desserializa√ß√£o manual com json.loads()
       - Medido separadamente para an√°lise

LAT√äNCIA END-TO-END = T3 - T0
(Tempo total desde cria√ß√£o at√© recebimento, sem processamento)
======================================================================

üìä RESUMO ESTAT√çSTICO
----------------------------------------------------------------------
Total de mensagens: 100
Lat√™ncia m√©dia: 19.85 ms
Lat√™ncia m√≠nima: 4.73 ms
Lat√™ncia m√°xima: 161.88 ms
Mediana: 18.09 ms
Desvio padr√£o: 16.64 ms

Percentis:
  P50: 18.11 ms
  P90: 29.56 ms
  P95: 36.09 ms
  P99: 161.88 ms

======================================================================

üìã DADOS DETALHADOS (FORMATO DATAFRAME)
----------------------------------------------------------------------
  ID |     T0_Creation |      T3_Receive |     T4_Deserial |    Latency |   Deserial |      Total | Part | Offset
----------------------------------------------------------------------
   0 | 1762555608370.752 | 1762555608532.633 | 1762555608532.667 |    161.881 |      0.033 |    161.915 |    0 |    100
   1 | 1762555608485.428 | 1762555608532.773 | 1762555608532.792 |     47.344 |      0.018 |     47.363 |    0 |    101
   2 | 1762555608489.855 | 1762555608532.824 | 1762555608532.834 |     42.969 |      0.009 |     42.979 |    0 |    102
   3 | 1762555608494.163 | 1762555608532.854 | 1762555608532.862 |     38.692 |      0.007 |     38.699 |    0 |    103
   4 | 1762555608499.177 | 1762555608532.881 | 1762555608532.889 |     33.704 |      0.008 |     33.713 |    0 |    104
   5 | 1762555608503.396 | 1762555608532.954 | 1762555608532.966 |     29.558 |      0.011 |     29.570 |    0 |    105
   6 | 1762555608508.268 | 1762555608533.022 | 1762555608533.033 |     24.754 |      0.011 |     24.765 |    0 |    106
   7 | 1762555608520.228 | 1762555608533.090 | 1762555608533.102 |     12.862 |      0.011 |     12.874 |    0 |    107
   8 | 1762555608524.720 | 1762555608533.158 | 1762555608533.170 |      8.438 |      0.011 |      8.450 |    0 |    108
   9 | 1762555608528.867 | 1762555608536.669 | 1762555608536.702 |      7.802 |      0.031 |      7.834 |    0 |    109
  10 | 1762555608532.085 | 1762555608536.816 | 1762555608536.834 |      4.731 |      0.018 |      4.749 |    0 |    110
  11 | 1762555608534.590 | 1762555608544.997 | 1762555608545.038 |     10.407 |      0.039 |     10.448 |    0 |    111
  12 | 1762555608537.517 | 1762555608545.152 | 1762555608545.169 |      7.635 |      0.017 |      7.653 |    0 |    112
  13 | 1762555608542.481 | 1762555608570.892 | 1762555608570.928 |     28.412 |      0.034 |     28.447 |    0 |    113
  14 | 1762555608555.263 | 1762555608571.052 | 1762555608571.067 |     15.790 |      0.014 |     15.804 |    0 |    114
  15 | 1762555608568.789 | 1762555608592.343 | 1762555608592.444 |     23.554 |      0.099 |     23.655 |    0 |    115
  16 | 1762555608585.644 | 1762555608597.519 | 1762555608597.569 |     11.875 |      0.049 |     11.926 |    0 |    116
  17 | 1762555608595.971 | 1762555608614.468 | 1762555608614.520 |     18.497 |      0.050 |     18.548 |    0 |    117
  18 | 1762555608604.986 | 1762555608624.937 | 1762555608624.977 |     19.951 |      0.039 |     19.992 |    0 |    118
  19 | 1762555608618.927 | 1762555608630.561 | 1762555608630.601 |     11.635 |      0.039 |     11.674 |    0 |    119
  20 | 1762555608624.978 | 1762555608643.259 | 1762555608643.295 |     18.281 |      0.036 |     18.317 |    0 |    120
  21 | 1762555608631.972 | 1762555608649.240 | 1762555608649.374 |     17.268 |      0.132 |     17.401 |    0 |    121
  22 | 1762555608643.166 | 1762555608658.271 | 1762555608658.306 |     15.105 |      0.033 |     15.140 |    0 |    122
  23 | 1762555608648.257 | 1762555608658.380 | 1762555608658.391 |     10.123 |      0.011 |     10.135 |    0 |    123
  24 | 1762555608657.679 | 1762555608669.237 | 1762555608669.274 |     11.558 |      0.036 |     11.595 |    0 |    124
  25 | 1762555608675.566 | 1762555608704.601 | 1762555608704.749 |     29.035 |      0.142 |     29.183 |    0 |    125
  26 | 1762555608687.085 | 1762555608710.093 | 1762555608710.128 |     23.008 |      0.034 |     23.043 |    0 |    126
  27 | 1762555608704.617 | 1762555608726.424 | 1762555608726.485 |     21.807 |      0.058 |     21.868 |    0 |    127
  28 | 1762555608711.130 | 1762555608734.838 | 1762555608734.903 |     23.708 |      0.064 |     23.772 |    0 |    128
  29 | 1762555608728.540 | 1762555608749.597 | 1762555608749.630 |     21.057 |      0.032 |     21.090 |    0 |    129
  30 | 1762555608737.612 | 1762555608765.954 | 1762555608765.998 |     28.342 |      0.043 |     28.386 |    0 |    130
  31 | 1762555608742.145 | 1762555608766.096 | 1762555608766.109 |     23.951 |      0.013 |     23.965 |    0 |    131
  32 | 1762555608758.001 | 1762555608770.742 | 1762555608770.782 |     12.740 |      0.039 |     12.781 |    0 |    132
  33 | 1762555608767.884 | 1762555608775.369 | 1762555608775.462 |      7.486 |      0.088 |      7.578 |    0 |    133
  34 | 1762555608774.494 | 1762555608782.115 | 1762555608782.148 |      7.620 |      0.032 |      7.654 |    0 |    134
  35 | 1762555608782.277 | 1762555608797.753 | 1762555608797.794 |     15.476 |      0.040 |     15.517 |    0 |    135
  36 | 1762555608792.785 | 1762555608801.649 | 1762555608801.686 |      8.865 |      0.035 |      8.901 |    0 |    136
  37 | 1762555608798.352 | 1762555608807.260 | 1762555608807.354 |      8.908 |      0.092 |      9.002 |    0 |    137
  38 | 1762555608802.069 | 1762555608815.721 | 1762555608815.766 |     13.652 |      0.043 |     13.697 |    0 |    138
  39 | 1762555608813.771 | 1762555608820.864 | 1762555608820.952 |      7.093 |      0.087 |      7.181 |    0 |    139
  40 | 1762555608831.898 | 1762555608857.793 | 1762555608857.831 |     25.895 |      0.037 |     25.933 |    0 |    140
  41 | 1762555608839.885 | 1762555608857.959 | 1762555608857.979 |     18.073 |      0.019 |     18.093 |    0 |    141
  42 | 1762555608855.416 | 1762555608863.031 | 1762555608863.084 |      7.615 |      0.052 |      7.668 |    0 |    142
  43 | 1762555608861.035 | 1762555608878.704 | 1762555608878.797 |     17.668 |      0.091 |     17.761 |    0 |    143
  44 | 1762555608875.673 | 1762555608882.792 | 1762555608882.828 |      7.119 |      0.035 |      7.155 |    0 |    144
  45 | 1762555608881.250 | 1762555608903.128 | 1762555608903.222 |     21.878 |      0.093 |     21.972 |    0 |    145
  46 | 1762555608891.312 | 1762555608922.446 | 1762555608922.490 |     31.133 |      0.044 |     31.178 |    0 |    146
  47 | 1762555608906.162 | 1762555608929.324 | 1762555608929.368 |     23.162 |      0.043 |     23.206 |    0 |    147
  48 | 1762555608913.692 | 1762555608929.531 | 1762555608929.555 |     15.839 |      0.024 |     15.864 |    0 |    148
  49 | 1762555608930.256 | 1762555608955.578 | 1762555608955.620 |     25.322 |      0.040 |     25.363 |    0 |    149
  50 | 1762555608935.246 | 1762555608969.116 | 1762555608969.154 |     33.870 |      0.037 |     33.908 |    0 |    150
  51 | 1762555608943.086 | 1762555608969.242 | 1762555608969.258 |     26.156 |      0.015 |     26.172 |    0 |    151
  52 | 1762555608951.024 | 1762555608969.351 | 1762555608969.377 |     18.327 |      0.025 |     18.353 |    0 |    152
  53 | 1762555608956.399 | 1762555608974.787 | 1762555608974.828 |     18.388 |      0.039 |     18.429 |    0 |    153
  54 | 1762555608968.207 | 1762555608994.559 | 1762555608994.598 |     26.352 |      0.037 |     26.390 |    0 |    154
  55 | 1762555608989.553 | 1762555609007.187 | 1762555609007.222 |     17.633 |      0.035 |     17.669 |    0 |    155
  56 | 1762555608996.576 | 1762555609007.341 | 1762555609007.357 |     10.765 |      0.016 |     10.781 |    0 |    156
  57 | 1762555609000.892 | 1762555609022.401 | 1762555609022.440 |     21.508 |      0.038 |     21.548 |    0 |    157
  58 | 1762555609006.729 | 1762555609029.705 | 1762555609029.754 |     22.976 |      0.048 |     23.025 |    0 |    158
  59 | 1762555609017.919 | 1762555609029.898 | 1762555609029.918 |     11.979 |      0.020 |     11.999 |    0 |    159
  60 | 1762555609022.838 | 1762555609040.946 | 1762555609040.983 |     18.108 |      0.036 |     18.146 |    0 |    160
  61 | 1762555609029.457 | 1762555609041.119 | 1762555609041.137 |     11.662 |      0.018 |     11.680 |    0 |    161
  62 | 1762555609035.327 | 1762555609071.417 | 1762555609071.456 |     36.091 |      0.037 |     36.129 |    0 |    162
  63 | 1762555609053.080 | 1762555609079.290 | 1762555609079.327 |     26.210 |      0.035 |     26.247 |    0 |    163
  64 | 1762555609063.077 | 1762555609081.529 | 1762555609081.564 |     18.452 |      0.035 |     18.488 |    0 |    164
  65 | 1762555609069.104 | 1762555609095.527 | 1762555609095.565 |     26.423 |      0.038 |     26.461 |    0 |    165
  66 | 1762555609081.001 | 1762555609107.505 | 1762555609107.544 |     26.503 |      0.039 |     26.543 |    0 |    166
  67 | 1762555609089.317 | 1762555609107.702 | 1762555609107.720 |     18.385 |      0.018 |     18.403 |    0 |    167
  68 | 1762555609098.373 | 1762555609112.580 | 1762555609112.617 |     14.208 |      0.036 |     14.244 |    0 |    168
  69 | 1762555609112.825 | 1762555609119.619 | 1762555609119.712 |      6.794 |      0.090 |      6.886 |    0 |    169
  70 | 1762555609116.532 | 1762555609134.099 | 1762555609134.139 |     17.568 |      0.039 |     17.607 |    0 |    170
  71 | 1762555609134.242 | 1762555609144.396 | 1762555609144.474 |     10.154 |      0.077 |     10.232 |    0 |    171
  72 | 1762555609139.263 | 1762555609153.189 | 1762555609153.227 |     13.926 |      0.037 |     13.964 |    0 |    172
  73 | 1762555609154.005 | 1762555609174.102 | 1762555609174.168 |     20.097 |      0.065 |     20.163 |    0 |    173
  74 | 1762555609167.787 | 1762555609182.260 | 1762555609182.296 |     14.474 |      0.035 |     14.510 |    0 |    174
  75 | 1762555609177.141 | 1762555609198.899 | 1762555609198.938 |     21.758 |      0.038 |     21.797 |    0 |    175
  76 | 1762555609182.012 | 1762555609215.920 | 1762555609215.958 |     33.908 |      0.037 |     33.946 |    0 |    176
  77 | 1762555609197.516 | 1762555609220.732 | 1762555609220.771 |     23.216 |      0.039 |     23.255 |    0 |    177
  78 | 1762555609216.152 | 1762555609237.732 | 1762555609237.766 |     21.580 |      0.033 |     21.614 |    0 |    178
  79 | 1762555609229.096 | 1762555609242.080 | 1762555609242.117 |     12.984 |      0.036 |     13.021 |    0 |    179
  80 | 1762555609236.753 | 1762555609255.121 | 1762555609255.172 |     18.368 |      0.050 |     18.419 |    0 |    180
  81 | 1762555609248.229 | 1762555609258.843 | 1762555609258.883 |     10.614 |      0.039 |     10.654 |    0 |    181
  82 | 1762555609255.295 | 1762555609280.375 | 1762555609280.501 |     25.081 |      0.121 |     25.206 |    0 |    182
  83 | 1762555609265.908 | 1762555609289.200 | 1762555609289.234 |     23.292 |      0.033 |     23.325 |    0 |    183
  84 | 1762555609278.773 | 1762555609294.236 | 1762555609294.274 |     15.463 |      0.036 |     15.500 |    0 |    184
  85 | 1762555609289.095 | 1762555609302.637 | 1762555609302.673 |     13.542 |      0.035 |     13.578 |    0 |    185
  86 | 1762555609298.008 | 1762555609311.352 | 1762555609311.386 |     13.344 |      0.034 |     13.379 |    0 |    186
  87 | 1762555609306.155 | 1762555609328.382 | 1762555609328.425 |     22.226 |      0.043 |     22.270 |    0 |    187
  88 | 1762555609316.167 | 1762555609335.556 | 1762555609335.587 |     19.389 |      0.030 |     19.420 |    0 |    188
  89 | 1762555609334.640 | 1762555609355.736 | 1762555609355.774 |     21.096 |      0.037 |     21.135 |    0 |    189
  90 | 1762555609342.676 | 1762555609355.897 | 1762555609355.914 |     13.222 |      0.017 |     13.239 |    0 |    190
  91 | 1762555609346.796 | 1762555609359.725 | 1762555609359.762 |     12.929 |      0.036 |     12.965 |    0 |    191
  92 | 1762555609357.892 | 1762555609362.823 | 1762555609362.870 |      4.930 |      0.033 |      4.978 |    0 |    192
  93 | 1762555609364.503 | 1762555609376.065 | 1762555609376.096 |     11.562 |      0.030 |     11.593 |    0 |    193
  94 | 1762555609375.927 | 1762555609391.996 | 1762555609392.031 |     16.068 |      0.035 |     16.104 |    0 |    194
  95 | 1762555609382.123 | 1762555609396.590 | 1762555609396.626 |     14.467 |      0.036 |     14.503 |    0 |    195
  96 | 1762555609387.175 | 1762555609397.034 | 1762555609397.069 |      9.859 |      0.034 |      9.894 |    0 |    196
  97 | 1762555609397.452 | 1762555609404.047 | 1762555609404.088 |      6.595 |      0.041 |      6.636 |    0 |    197
  98 | 1762555609403.081 | 1762555609417.880 | 1762555609417.913 |     14.798 |      0.033 |     14.832 |    0 |    198
  99 | 1762555609415.831 | 1762555609434.682 | 1762555609434.805 |     18.850 |      0.120 |     18.974 |    0 |    199

======================================================================
LEGENDA:
  ID         = Identificador da mensagem
  T0_Creation = Timestamp de cria√ß√£o no producer (ms)
  T3_Receive  = Timestamp de recebimento RAW no consumer (ms)
  T4_Deserial = Timestamp ap√≥s desserializa√ß√£o (ms)
  Latency     = Lat√™ncia end-to-end SEM desserializa√ß√£o (ms)
  Deserial    = Tempo de desserializa√ß√£o JSON (ms)
  Total       = Tempo total COM desserializa√ß√£o (ms)
  Part        = Parti√ß√£o do Kafka onde a mensagem foi armazenada
  Offset      = Offset da mensagem na parti√ß√£o
======================================================================
